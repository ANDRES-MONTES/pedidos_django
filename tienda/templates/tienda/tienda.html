{% extends 'ProyectApp/base.html' %}
{% load static %}

{% block content %}
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}  alert-dismissible fade show text-center mt-3"  role="alert">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <div class="container mt-4">
        {% if user.is_authenticated %}
            <div style="float:right;">
                {% include "carro/widget.html" %}
            </div>
        {% else %}
            <div class="alert alert-warning text-center fw-bold" role="alert">
                ðŸš€ Â¡RegÃ­strate o inicia sesiÃ³n para empezar a comprar! ðŸ›’  
            </div>
           
        {% endif %}
        <div class="row">
            {% for i in productos %}
                <div class="col-md-3 mb-4">
                    <div class="card h-100  shadow rounded">
                        {% if i.imagen %}
                        <img src="{{ i.imagen.url }}" class="card-img-top img-fluid" style="height: 260px; object-fit: contain;" alt="Imagen de {{ i.name }}">
                        {% endif %}
                        <div class="card-body d-flex flex-column justify-content-center align-items-center">
                            <h5 class="card-title fw-bold">{{ i.name }}</h5>
                            <p class="card-text">${{ i.precio|truncatechars:100 }}</p>
                        </div>
                        <div class="card-footer text-center">
                            <a href="{% url 'carro:agregar' i.id %}" class="btn btn-success" > Agregar al carro </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

{% endblock %}